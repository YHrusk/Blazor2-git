@page "/vybaveni/{Id:guid}"
@inject HttpClient Http

<h3>Detail vybaveni:</h3>

@if (item == null)
{
    <Loading></Loading>
    return;
}

<div class="grid grid-cols-2">

    <div class="bg-blue-400">Název</div>
    <div class="bg-red-500">@item.Name</div>

    <div class="bg-blue-400">Cena</div>
    <div class="bg-red-500">@item.Price</div>

    <div class="bg-blue-400">Nakoupeno</div>
    <div class="bg-red-500">@item.BoughtDate.ToString("yyyy-MM-dd")</div>

    <div class="col-span-2">
             <div class="font-bold">Revize</div>

     @foreach(var rev in item.Revizes)
        {
            <div> Nazev: @rev.Name Datum: @rev.DateTime?.ToString("yyyy-MM-dd")</div>
        }
    </div>

    <div class="col-span-2">
        <div class="font-bold">Úkony</div>

     @foreach(var uk in item.Ukons)
        {
            <div> Info: @uk.Info, Kód: @uk.Kod,  Datum: @uk.DateTime?.ToString("yyyy-MM-dd")</div>
        }
    </div>
</div>

<a class="twbtn bg-green-400" href="ukon/new?VybaveniId=@Id" style="display:inline-block;">Přidat úkon</a>
<a class="twbtn bg-yellow-400" href="/vybaveni" style="display:inline-block;">Zpět</a>

@code {
    [Parameter] public Guid Id { get; set; }

    VybaveniSRevizesModel? item;

    protected override async Task OnInitializedAsync()
    {
        item = await Http.GetFromJsonAsync<VybaveniSRevizesModel>($"vybaveni/{Id}");
    }
}
